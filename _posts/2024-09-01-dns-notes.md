---
layout: post
title:  DNS Notes
date:   2024-09-01
categories: [technology, computer network, DNS, notes]
tags: [technology, computer network, DNS, notes]
description: Study notes of DNS technology
mermaid: true
---


## What is DNS?

Domain Name System is a service/protocol that provides **Name Resolution** funtionality.

**Name Resolution** is the process of converting domain names (human-readable words as web addresses)
into IP addresses ([dot-decimal notation][ddn]), which can be understood by computers.


## Why DNS?

Humans are bad at remembering numbers, we simply cannot remember all the websites' addresses in IP numbers.
In addition, with the help of DNS service, you can then change a website's IP address without changing the
corresponding domain name, thus making the web more 'predictable'.


## How does DNS work?

To provide such service, there exist many DNS server(s) to fullfil the job. They are the backbone of internet.
In simple terms, what happens is that the 'client computer/program' makes a DNS lookup request to the DNS
system (comprised of a group of servers), and the system eventually responds with the correct
IP address of the requested domain name to the client. From this, you can easily deduce that DNS service,
just like many other networked services, follows the 'Client-Server' model of communication.

As indicated above, DNS lookup could (for example, a full lookup) involve many name servers. These servers
exchange information in a *hierarchical* manner before eventually giving back the final answer to the client.

To elaborate, different DNS name servers are playing different 'roles' during serving a DNS lookup request.
These different roles forms the hierarchical nature of communication. There are *five* main such roles of
name servers:

Caching name servers
: Store known domain name lookups for a certain amount of time (provided by ISP or local network)
  so that a full DNS lookup can be avoided.

Recursive name servers
: Performs full DNS resolution requests (provided by ISP or local network)

Root name servers
: 13 Authorities that provide root name lookups as a service

TLD (Top-Level Domain) name servers
: Represents top of the hierarchical DNS name resolution system

Authoritative name servers
: Responsible for the last two parts of any domain name (for example **www.facebook** in www.facebook.com)

Here is how a full DNS lookup works in action:

```mermaid
sequenceDiagram
    autonumber
    participant User
    participant Caching/recursive name server
    participant Root name server
    participant TLD name server
    participant Authoritative name server
    User->>Caching/recursive name server: DNS lookup request
    Caching/recursive name server->>Root name server: TLD lookup request
    Root name server->>Caching/recursive name server: Response with the TLD name server that should be queried
    Caching/recursive name server->>TLD name server: Authoritative name server lookup request
    TLD name server->>Caching/recursive name server: Redirect to the corresponding Authoritative name servers
    Caching/recursive name server->>Authoritative name server: DNS lookup for the corresponding domain
    Authoritative name server->>Caching/recursive name server: Response with actual IP of the server in question
    Caching/recursive name server->>User: Response with actual IP of the server in question
```

Also note that DNS is an **application layer** protocol which is mainly running on top of **UDP** as its
transport layer protocol.

[Anycast][anycast] is the technique for a recursive name server to find ONE nearest root name server to contact to.



### DNS resource types

DNS operates with a set of different resource types. This allows different kinds of DNS resolution.

A record
: Point a certain domain name at a certain IPv4 address. This is the most common/basic DNS record in use.

Quad A record
: Similar to A record, but returns an IPv6 address instead of IPv4 address.

CNAME (Canonical Name) record
: Used to redirect traffic from one domain name to another. Super commonly used. This
  allows the website to have only one canonical IP address for multiple domain names. And whenever you
  need to change the IP address for the service, you only need to change ONE IP address for all the related
  domain name.

MX (Mail Exchange) record
: Used to deliver email to the correct server. Only used for mail services.

SRV (Service) record
: Used to define the location of various specific services. Can be used for many different specific services.

TXT (Text) record
: Originally intended to be used only for associating some descriptive
  text with a domain name for human consumption. Nowadays it is used to
  communicate configuration preferences about network services.

NS (Name Server) record
: Indicate other name servers that might also be responsible for this zone.


[anycast]: https://en.wikipedia.org/wiki/Anycast
[ddn]: https://en.wikipedia.org/wiki/Dot-decimal_notation